(this.webpackJsonpvoicenoted=this.webpackJsonpvoicenoted||[]).push([[0],{11:function(t){t.exports=JSON.parse('[{"audioid":1,"title":"412. Side Project Perfectionism","subtitle":"Stories & Cities"}]')},37:function(t,e,n){},38:function(t,e,n){},59:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var a,i,s,c=n(1),r=n.n(c),o=n(29),d=n.n(o),l=(n(37),n(2)),p=n(3),u=n(5),j=n(4),h=(n(38),n.p+"static/media/navbar_listen_filled.c2a5b26f.svg"),b=n.p+"static/media/navbar_community_filled.e11a0d0e.svg",f=n.p+"static/media/navbar_library_filled.8d3f8539.svg",m=n.p+"static/media/navbar_gear_filled.1eb524b9.svg",O=n.p+"static/media/navbar_listen_stroke.0dafe3e3.svg",v=n.p+"static/media/navbar_community_stroke.8a966c29.svg",x=n.p+"static/media/navbar_library_stroke.3940c46c.svg",g=n.p+"static/media/navbar_gear_stroke.bae66659.svg",N=n(0),y=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).navbarElements=["listen","discover","notes","settings"],a.changeSelected=function(t){a.setState({selected:t})},a.state={selected:"listen"},a}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(N.jsx)("div",{className:"Navbar",children:this.navbarElements.map((function(e,n){return Object(N.jsx)(k,{changeSelected:t.changeSelected,changeView:t.props.changeView,view:e,selected:t.state.selected===e},n)}))})}}]),n}(r.a.Component),k=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).navbarIcons={filled:{listen:h,discover:b,notes:f,settings:m},stroke:{listen:O,discover:v,notes:x,settings:g}},a.onClick=function(){a.props.changeView(a.props.view),a.props.changeSelected(a.props.view)},a}return Object(p.a)(n,[{key:"render",value:function(){return Object(N.jsx)("button",{className:"NavbarButton",onClick:this.onClick,children:Object(N.jsx)("img",{alt:"icon",src:this.navbarIcons[this.props.selected?"filled":"stroke"][this.props.view]})})}}]),n}(r.a.Component),w=y,C=n(8),S=n.n(C),R=n(9),T=n(10),I=n.n(T),E=n.p+"static/media/audio_cover.08eb2b3d.png",_=n.p+"static/media/play.871ef5ec.svg",V=n.p+"static/media/pause.750131bd.svg",M=n.p+"static/media/speech.174e1686.flac",Z=(n(59),function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).formatTime=function(t){var e=Math.floor(t),n=Math.floor(e/60),a=e%60;return(n<10?"0":"")+n+":"+(a<10?"0":"")+a},a.getAudioFile=function(){var t=Object(R.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return t.next=4,t.sent.blob();case 4:return n=t.sent,t.abrupt("return",new File([n],"FILE_NAME",{type:"audio/flac"}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.togglePlay=function(){a.state.playing?(a.setState({playing:!1}),a.audioRef.current.pause()):(a.setState({playing:!0}),a.audioRef.current.play())},a.startAddNote=function(){a.setState({addingNote:!0,addNoteStartTime:a.audioRef.current.currentTime})},a.stopAddNote=function(){a.setState({addingNote:!1,addNoteEndTime:a.audioRef.current.currentTime},Object(R.a)(S.a.mark((function t(){var e,n,i,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Math.floor(a.state.addNoteStartTime),n=Math.ceil(a.state.addNoteEndTime),i=new FormData,t.t0=i,t.next=6,a.getAudioFile(M);case 6:return t.t1=t.sent,t.t0.append.call(t.t0,"file",t.t1),i.append("startTime",e),i.append("endTime",n),t.next=12,I()({method:"post",url:"https://voicenoted.herokuapp.com/speechToText",headers:{"Content-Type":"multipart/form-data"},data:i}).catch((function(t){a.setState({popupError:!0,popupOpen:!0})}));case 12:return s=t.sent,console.log(s.data),t.next=16,I.a.post("https://voicenoted.herokuapp.com/saveNote",{token:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbS9nb29nbGUuaWRlbnRpdHkuaWRlbnRpdHl0b29sa2l0LnYxLklkZW50aXR5VG9vbGtpdCIsImlhdCI6MTYzMjAxODcyMiwiZXhwIjoxNjMyMDIyMzIyLCJpc3MiOiJmaXJlYmFzZS1hZG1pbnNkay1heHF2dkB2b2ljZS1hZDM0MC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsInN1YiI6ImZpcmViYXNlLWFkbWluc2RrLWF4cXZ2QHZvaWNlLWFkMzQwLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwidWlkIjoic29tZS11aWQifQ.OhYG56dJc6BEvNUXFZCnmtfgvZPzbTUZsEPvIgXZ55UjlQO1KDwP-HkR6bchxaqyGbQs1Dz9CMZY14xdZu9CC-aIsKzO87jO-qvJd66XPsYE6mJCGmUzEu_I4pcavH6aU3EEEpbWausMs11M2C9GFdhvBs-iYYSkztSAMdZfVR2D_FlEU4A91ISnQH3VNYv79bLV9DRn9SURpAc8PTKzsrg0yK5g4XtUD3854Rkak7ZSaec_WVC8DNwwl-KfoCw4GwFH-nIJU2_HfI4dCrOORudHOKdEq8-roYHhvYsC5Vqx4XPOE0nsOey_aEHvSNeqjoGQ5JW0ssX0_AQOgmkRVA",timestamp:{start:e,end:n},audioid:1,content:s.data.text,audioLink:s.data.audioLink}).catch((function(t){a.setState({popupError:!0,popupOpen:!0})}));case 16:a.setState({popupError:!1,popupOpen:!0});case 17:case"end":return t.stop()}}),t)}))))},a.timeUpdate=function(){a.setState({currTime:a.audioRef.current.currentTime})},a.handleTimelineChange=function(t){a.audioRef.current.currentTime=t.target.value},a.state={playing:!1,addingNote:!1,addNoteStartTime:0,addNoteEndTime:0,currTime:0,duration:0,popupOpen:!1,popupError:!1},a.audioRef=r.a.createRef(),a.audioElement=document.getElementById("audio"),a}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e=this.state.addingNote?"Stop":Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("i",{className:"fas fa-fw fa-plus"})," Add Note"]});return Object(N.jsxs)("div",{className:"ListeningView",children:[Object(N.jsxs)("div",{className:"top-wrapper",children:[Object(N.jsx)("img",{src:E,alt:"audio_cover_1.png"}),Object(N.jsx)("div",{className:"title",children:this.props.title}),Object(N.jsx)("div",{className:"subtitle",children:this.props.subtitle})]}),Object(N.jsxs)("div",{className:"player",children:[Object(N.jsxs)("div",{className:"time-wrapper",children:[Object(N.jsx)("input",{type:"range",min:"0",step:"0.1",max:Math.ceil(this.state.duration),value:this.state.currTime,onChange:this.handleTimelineChange,disabled:this.state.addingNote}),Object(N.jsx)("span",{className:"time left",children:this.formatTime(this.state.currTime)}),Object(N.jsx)("span",{className:"time right",children:this.formatTime(this.state.duration)})]}),Object(N.jsx)("img",{src:this.state.playing?V:_,alt:"play pause",onClick:this.togglePlay,className:"playPause"}),Object(N.jsx)("audio",{ref:this.audioRef,src:M,type:"audio/flac",onTimeUpdate:this.timeUpdate,onDurationChange:function(){t.setState({duration:t.audioRef.current.duration})}})]}),Object(N.jsx)("button",{className:"addNote",onClick:this.state.addingNote?this.stopAddNote:this.startAddNote,children:e}),Object(N.jsxs)("div",{style:{display:this.state.popupOpen?"block":"none",position:"absolute",top:24,left:24,backgroundColor:this.state.popupError?"#ff0000":"#338B31",borderRadius:8,padding:12,color:"#fff"},children:[Object(N.jsx)("button",{style:{margin:-12,marginRight:12,background:"none",color:"#fff"},onClick:function(){t.setState({popupOpen:!1})},children:"\xd7"}),this.state.popupError?"Failed to upload voicenote :(":"Voicenote added successfully :D"]})]})}}]),n}(r.a.Component)),F=Z,P=n(12),A=n(13),W=A.a.div(a||(a=Object(P.a)(["\n    margin-left: -25px;\n    button {\n        background-color: white;\n        border: none;\n        color: #F3AAA5;\n        padding: 10px;\n        padding-left: 20px;\n        font-size: 20px;\n    }\n\n    input {\n        color: silver;\n        border: silver;\n        padding: 8px;\n        width: 350px;\n    }\n\n    form {\n        width: 300px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n    }\n"]))),Y=function(){return Object(N.jsx)(W,{children:Object(N.jsxs)("form",{action:"/",method:"get",children:[Object(N.jsx)("button",{type:"submit",children:Object(N.jsx)("i",{class:"fas fa-search"})}),Object(N.jsx)("input",{type:"text",id:"header-search",placeholder:"Search for podcast episodes",name:"s"})]})})},z=(n(61),n(66)),D=n.p+"static/media/audio_cover_1.4103535e.png",H=n.p+"static/media/audio_cover_2.c32254c3.png",J=n.p+"static/media/audio_cover_3.2b4cc945.png",L=A.a.div(i||(i=Object(P.a)(["\n    width: 320px;\n    display: flex;\n    flex-direction: row;\n    margin-left: -35px;\n    overflow: scroll;\n    margin-top: 10px;\n    .pod {\n        padding: 10px;\n    }\n    .pic {\n        width: 88px;\n    }\n    .title {\n        font-size: 11px;\n        font-weight: bold;\n        text-align: left;\n    }\n    .subtitle {\n        margin: 1px;\n        font-size: 10px;\n        text-align: left;\n        opacity: 75%;\n    }\n"]))),G=A.a.div(s||(s=Object(P.a)(["\n    display: flex;\n    flex-direction: column;\n    & header {\n        text-align: left;\n        font-weight: bold;\n        text-size: 20px;\n        padding: 3px;\n        margin-top: 15px;\n        margin-bottom: -10px;\n        margin-left: -20px;\n    }\n"]))),U=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(N.jsxs)(G,{children:[Object(N.jsx)("header",{children:this.props.title}),Object(N.jsxs)(L,{children:[Object(N.jsxs)(z.a,{className:"pod",children:[Object(N.jsx)(z.a.Img,{className:"pic",variant:"top",src:D}),Object(N.jsxs)(z.a.Body,{children:[Object(N.jsx)(z.a.Title,{className:"title",children:"The Side Project Perfectionism"}),Object(N.jsx)(z.a.Text,{className:"subtitle",children:"Stories & Cities"})]})]}),Object(N.jsxs)(z.a,{className:"pod",style:{width:"18rem"},children:[Object(N.jsx)(z.a.Img,{className:"pic",variant:"top",src:J}),Object(N.jsxs)(z.a.Body,{children:[Object(N.jsx)(z.a.Title,{className:"title",children:"How to Deal with Recent Stress"}),Object(N.jsx)(z.a.Text,{className:"subtitle",children:"Kalyn's Coffee Talk"})]})]}),Object(N.jsxs)(z.a,{className:"pod",style:{width:"18rem"},children:[Object(N.jsx)(z.a.Img,{className:"pic",variant:"top",src:H}),Object(N.jsxs)(z.a.Body,{children:[Object(N.jsx)(z.a.Title,{className:"title",children:"Black Holes"}),Object(N.jsx)(z.a.Text,{className:"subtitle",children:"SpaceTalk Radio"})]})]}),Object(N.jsxs)(z.a,{className:"pod",children:[Object(N.jsx)(z.a.Img,{className:"pic",variant:"top",src:D}),Object(N.jsxs)(z.a.Body,{children:[Object(N.jsx)(z.a.Title,{className:"title",children:"The Side Project Perfectionism"}),Object(N.jsx)(z.a.Text,{className:"subtitle",children:"Stories & Cities"})]})]})]})]})}}]),n}(c.Component),X=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{className:"wrapper",children:[Object(N.jsx)("div",{className:"sectionHeader",children:"Discover"}),Object(N.jsx)(Y,{}),Object(N.jsx)(U,{title:"From your library"}),Object(N.jsx)(U,{title:"Recommended for you"}),Object(N.jsx)(U,{title:"Popular"})]})}}]),n}(r.a.Component),B=X,Q=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,t)}return Object(p.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:"SettingsView"})}}]),n}(r.a.Component),K=n.p+"static/media/dotdotdot.2f97300b.svg",q=(n(62),n(11)),$=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).updateNotes=Object(R.a)(S.a.mark((function t(){var e;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("https://voicenoted.herokuapp.com/getNotes",{params:{audioid:1}});case 2:e=t.sent,a.setState({notes:e.data.sort((function(t,e){return t.timestamp.start-e.timestamp.start}))});case 4:case"end":return t.stop()}}),t)}))),a.editNote=function(t){a.setState((function(e){return{editingNote:!0,editNoteIndex:t,editCounter:e.editCounter+1}}))},a.stopEditNote=function(){a.setState({editingNote:!1})},a.setNoteContent=function(t,e){var n=a.state.notes.slice();n[t].content=e,a.setState({notes:n})},a.state={notes:[],editingNote:!1,editNoteIndex:0,editCounter:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.updateNotes()}},{key:"renderNoteView",value:function(){return Object(N.jsxs)("div",{className:"NotesView",children:[Object(N.jsx)("h2",{children:"Voicenotes"}),Object(N.jsx)(tt,{display:!this.state.editingNote,title:q[0].title,subtitle:q[0].subtitle,notes:this.state.notes,editNote:this.editNote}),Object(N.jsx)(nt,{display:this.state.editingNote,data:this.state.notes[this.state.editNoteIndex],index:this.state.editNoteIndex,counter:this.state,stopEditNote:this.stopEditNote,setNoteContent:this.setNoteContent})]})}},{key:"render",value:function(){return this.renderNoteView()}}]),n}(r.a.Component),tt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return this.props.display?Object(N.jsxs)("div",{className:"section",children:[Object(N.jsx)("h2",{children:this.props.title}),Object(N.jsx)("p",{children:this.props.subtitle}),this.props.notes.map((function(e,n){return Object(N.jsx)(et,{index:n,data:e,editNote:t.props.editNote},n)}))]}):null}}]),n}(r.a.Component),et=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).togglePlay=function(){a.state.playing?(a.setState({playing:!1}),a.audioRef.current.pause()):(a.setState({playing:!0}),a.audioRef.current.play())},a.edit=function(){a.props.editNote(a.props.index)},a.state={playing:!1},a.audioRef=r.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){return Object(N.jsxs)("div",{className:"note",children:[Object(N.jsx)("audio",{ref:this.audioRef,src:this.props.data.audioLink,type:"audio/flac",loop:!0}),Object(N.jsx)("img",{src:this.state.playing?V:_,alt:"play pause",onClick:this.togglePlay,className:"playPause"}),Object(N.jsx)("span",{className:"content",children:this.props.data.content}),void 0!==this.props.editNote&&Object(N.jsx)("img",{src:K,alt:"dotdotdot",className:"dotdotdot",onClick:this.edit})]})}}]),n}(r.a.Component),nt=function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).save=Object(R.a)(S.a.mark((function t(){var e;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.textareaRef.current.value,t.next=3,I.a.post("https://voicenoted.herokuapp.com/updateNote",{noteid:a.props.data.noteid,content:e}).catch((function(t){a.props.stopEditNote()}));case 3:a.props.setNoteContent(a.props.index,e),a.props.stopEditNote();case 5:case"end":return t.stop()}}),t)}))),a.textareaRef=r.a.createRef(),a}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(t){var e;this.props.counter!==t.counter&&(this.textareaRef.current&&(this.textareaRef.current.value=(null===(e=this.props.data)||void 0===e?void 0:e.content)?this.props.data.content:""))}},{key:"render",value:function(){return this.props.display?Object(N.jsxs)("div",{className:"EditNoteView",children:[Object(N.jsx)(et,{data:this.props.data}),Object(N.jsx)("textarea",{ref:this.textareaRef}),Object(N.jsx)("div",{children:Object(N.jsx)("button",{onClick:this.save,children:"Save"})})]}):null}}]),n}(r.a.Component),at=$,it=(n(63),function(t){Object(u.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).changeView=function(t){a.setState({view:t})},a.state={view:"listen"},a}return Object(p.a)(n,[{key:"render",value:function(){var t={listen:Object(N.jsx)(F,{title:q[0].title,subtitle:q[0].subtitle}),discover:Object(N.jsx)(B,{}),notes:Object(N.jsx)(at,{}),settings:Object(N.jsx)(Q,{})};return Object(N.jsxs)("div",{className:"App",children:[t[this.state.view],Object(N.jsx)(w,{changeView:this.changeView})]})}}]),n}(c.Component));d.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(it,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.fcbccf5a.chunk.js.map